<!DOCTYPE html>
<html lang="pl-PL" xml:lang="pl-PL">
<head>

  <meta charset="utf-8" />
  <meta http-equiv="X-UA-Compatible" content="IE=edge" />
  <title>Rozdział 12 Operacje na plikach | _main.knit</title>
  <meta name="description" content="Skrypt dla początkujących<br />
<strong>Poznaj C w ciągu kilku godzin</strong></div>" />
  <meta name="generator" content="bookdown 0.33 and GitBook 2.6.7" />

  <meta property="og:title" content="Rozdział 12 Operacje na plikach | _main.knit" />
  <meta property="og:type" content="book" />
  
  
  <meta name="github-repo" content="Asura-Codes/CheetSheets" />

  <meta name="twitter:card" content="summary" />
  <meta name="twitter:title" content="Rozdział 12 Operacje na plikach | _main.knit" />
  
  
  

<meta name="author" content="Patryk Tomaszewski" />



  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <meta name="apple-mobile-web-app-capable" content="yes" />
  <meta name="apple-mobile-web-app-status-bar-style" content="black" />
  
  
<link rel="prev" href="operacje-wejściawyjścia-ang.-inputoutput-operations.html"/>
<link rel="next" href="zakres-zmiennych-ang.-variable-scope.html"/>
<script src="libs/jquery-3.6.0/jquery-3.6.0.min.js"></script>
<script src="https://cdn.jsdelivr.net/npm/fuse.js@6.4.6/dist/fuse.min.js"></script>
<link href="libs/gitbook-2.6.7/css/style.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-table.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-bookdown.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-highlight.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-search.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-fontsettings.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-clipboard.css" rel="stylesheet" />








<link href="libs/anchor-sections-1.1.0/anchor-sections.css" rel="stylesheet" />
<link href="libs/anchor-sections-1.1.0/anchor-sections-hash.css" rel="stylesheet" />
<script src="libs/anchor-sections-1.1.0/anchor-sections.js"></script>


<style type="text/css">
pre > code.sourceCode { white-space: pre; position: relative; }
pre > code.sourceCode > span { display: inline-block; line-height: 1.25; }
pre > code.sourceCode > span:empty { height: 1.2em; }
.sourceCode { overflow: visible; }
code.sourceCode > span { color: inherit; text-decoration: inherit; }
pre.sourceCode { margin: 0; }
@media screen {
div.sourceCode { overflow: auto; }
}
@media print {
pre > code.sourceCode { white-space: pre-wrap; }
pre > code.sourceCode > span { text-indent: -5em; padding-left: 5em; }
}
pre.numberSource code
  { counter-reset: source-line 0; }
pre.numberSource code > span
  { position: relative; left: -4em; counter-increment: source-line; }
pre.numberSource code > span > a:first-child::before
  { content: counter(source-line);
    position: relative; left: -1em; text-align: right; vertical-align: baseline;
    border: none; display: inline-block;
    -webkit-touch-callout: none; -webkit-user-select: none;
    -khtml-user-select: none; -moz-user-select: none;
    -ms-user-select: none; user-select: none;
    padding: 0 4px; width: 4em;
    color: #aaaaaa;
  }
pre.numberSource { margin-left: 3em; border-left: 1px solid #aaaaaa;  padding-left: 4px; }
div.sourceCode
  {   }
@media screen {
pre > code.sourceCode > span > a:first-child::before { text-decoration: underline; }
}
code span.al { color: #ff0000; font-weight: bold; } /* Alert */
code span.an { color: #60a0b0; font-weight: bold; font-style: italic; } /* Annotation */
code span.at { color: #7d9029; } /* Attribute */
code span.bn { color: #40a070; } /* BaseN */
code span.bu { color: #008000; } /* BuiltIn */
code span.cf { color: #007020; font-weight: bold; } /* ControlFlow */
code span.ch { color: #4070a0; } /* Char */
code span.cn { color: #880000; } /* Constant */
code span.co { color: #60a0b0; font-style: italic; } /* Comment */
code span.cv { color: #60a0b0; font-weight: bold; font-style: italic; } /* CommentVar */
code span.do { color: #ba2121; font-style: italic; } /* Documentation */
code span.dt { color: #902000; } /* DataType */
code span.dv { color: #40a070; } /* DecVal */
code span.er { color: #ff0000; font-weight: bold; } /* Error */
code span.ex { } /* Extension */
code span.fl { color: #40a070; } /* Float */
code span.fu { color: #06287e; } /* Function */
code span.im { color: #008000; font-weight: bold; } /* Import */
code span.in { color: #60a0b0; font-weight: bold; font-style: italic; } /* Information */
code span.kw { color: #007020; font-weight: bold; } /* Keyword */
code span.op { color: #666666; } /* Operator */
code span.ot { color: #007020; } /* Other */
code span.pp { color: #bc7a00; } /* Preprocessor */
code span.sc { color: #4070a0; } /* SpecialChar */
code span.ss { color: #bb6688; } /* SpecialString */
code span.st { color: #4070a0; } /* String */
code span.va { color: #19177c; } /* Variable */
code span.vs { color: #4070a0; } /* VerbatimString */
code span.wa { color: #60a0b0; font-weight: bold; font-style: italic; } /* Warning */
</style>


<link rel="stylesheet" href="css/styles.css" type="text/css" />
</head>

<body>



  <div class="book without-animation with-summary font-size-2 font-family-1" data-basepath=".">

    <div class="book-summary">
      <nav role="navigation">

<ul class="summary">
<li><a href="https://asura-codes.github.io">Asura Codes</a></li>

<li class="divider"></li>
<li class="chapter" data-level="1" data-path="wprowadzenie-do-c.html"><a href="wprowadzenie-do-c.html"><i class="fa fa-check"></i><b>1</b> Wprowadzenie do C</a></li>
<li class="chapter" data-level="2" data-path="typy-zmiennych.html"><a href="typy-zmiennych.html"><i class="fa fa-check"></i><b>2</b> Typy zmiennych</a>
<ul>
<li class="chapter" data-level="2.1" data-path="typy-zmiennych.html"><a href="typy-zmiennych.html#zmienne-typu-całkowitego-ang.-integer-numbers"><i class="fa fa-check"></i><b>2.1</b> Zmienne typu całkowitego (ang. integer numbers)</a></li>
<li class="chapter" data-level="2.2" data-path="typy-zmiennych.html"><a href="typy-zmiennych.html#kwalifikator-unsigned"><i class="fa fa-check"></i><b>2.2</b> Kwalifikator <code>unsigned</code></a></li>
<li class="chapter" data-level="2.3" data-path="typy-zmiennych.html"><a href="typy-zmiennych.html#problem-przepełnienia-ang.-overflow"><i class="fa fa-check"></i><b>2.3</b> Problem przepełnienia (ang. overflow)</a></li>
<li class="chapter" data-level="2.4" data-path="typy-zmiennych.html"><a href="typy-zmiennych.html#ostrzeżenia-ang.-warnings-kompilatora-spowodowane-niejawną-konwersją-ang.-implicit-conversion"><i class="fa fa-check"></i><b>2.4</b> Ostrzeżenia (ang. warnings) kompilatora spowodowane niejawną konwersją (ang. implicit conversion)</a></li>
<li class="chapter" data-level="2.5" data-path="typy-zmiennych.html"><a href="typy-zmiennych.html#liczby-zmiennoprzecinkowe-ang.-floating-point-numbers"><i class="fa fa-check"></i><b>2.5</b> Liczby zmiennoprzecinkowe (ang. floating point numbers)</a></li>
</ul></li>
<li class="chapter" data-level="3" data-path="stałe-ang.-constants.html"><a href="stałe-ang.-constants.html"><i class="fa fa-check"></i><b>3</b> Stałe (ang. constants)</a></li>
<li class="chapter" data-level="4" data-path="operatory.html"><a href="operatory.html"><i class="fa fa-check"></i><b>4</b> Operatory</a>
<ul>
<li class="chapter" data-level="4.1" data-path="operatory.html"><a href="operatory.html#operatory-arytmetyczne"><i class="fa fa-check"></i><b>4.1</b> Operatory arytmetyczne</a></li>
<li class="chapter" data-level="4.2" data-path="operatory.html"><a href="operatory.html#operatory-relacji"><i class="fa fa-check"></i><b>4.2</b> Operatory relacji</a></li>
<li class="chapter" data-level="4.3" data-path="operatory.html"><a href="operatory.html#operatory-logiczne"><i class="fa fa-check"></i><b>4.3</b> Operatory logiczne</a></li>
<li class="chapter" data-level="4.4" data-path="operatory.html"><a href="operatory.html#złożone-operatory-przypisania"><i class="fa fa-check"></i><b>4.4</b> Złożone operatory przypisania</a></li>
<li class="chapter" data-level="4.5" data-path="operatory.html"><a href="operatory.html#operator-trójoperandowy-ang.-ternary-operator"><i class="fa fa-check"></i><b>4.5</b> Operator trójoperandowy (ang. ternary operator)</a></li>
<li class="chapter" data-level="4.6" data-path="operatory.html"><a href="operatory.html#sizeof"><i class="fa fa-check"></i><b>4.6</b> <code>sizeof</code></a></li>
<li class="chapter" data-level="4.7" data-path="operatory.html"><a href="operatory.html#priorytety-operatorów"><i class="fa fa-check"></i><b>4.7</b> Priorytety operatorów</a></li>
</ul></li>
<li class="chapter" data-level="5" data-path="instrukcje-warunkowe-ang.-conditionals.html"><a href="instrukcje-warunkowe-ang.-conditionals.html"><i class="fa fa-check"></i><b>5</b> Instrukcje warunkowe (ang. conditionals)</a>
<ul>
<li class="chapter" data-level="5.1" data-path="instrukcje-warunkowe-ang.-conditionals.html"><a href="instrukcje-warunkowe-ang.-conditionals.html#if"><i class="fa fa-check"></i><b>5.1</b> <code>if</code></a></li>
<li class="chapter" data-level="5.2" data-path="instrukcje-warunkowe-ang.-conditionals.html"><a href="instrukcje-warunkowe-ang.-conditionals.html#switch"><i class="fa fa-check"></i><b>5.2</b> <code>switch</code></a></li>
</ul></li>
<li class="chapter" data-level="6" data-path="pętle-ang.-loops.html"><a href="pętle-ang.-loops.html"><i class="fa fa-check"></i><b>6</b> Pętle (ang. loops)</a>
<ul>
<li class="chapter" data-level="6.1" data-path="pętle-ang.-loops.html"><a href="pętle-ang.-loops.html#pętla-for"><i class="fa fa-check"></i><b>6.1</b> Pętla <code>for</code></a></li>
<li class="chapter" data-level="6.2" data-path="pętle-ang.-loops.html"><a href="pętle-ang.-loops.html#pętla-while"><i class="fa fa-check"></i><b>6.2</b> Pętla <code>while</code></a></li>
<li class="chapter" data-level="6.3" data-path="pętle-ang.-loops.html"><a href="pętle-ang.-loops.html#pętla-do-while"><i class="fa fa-check"></i><b>6.3</b> Pętla <code>do while</code></a></li>
<li class="chapter" data-level="6.4" data-path="pętle-ang.-loops.html"><a href="pętle-ang.-loops.html#instrukcja-break"><i class="fa fa-check"></i><b>6.4</b> Instrukcja <code>break</code></a></li>
</ul></li>
<li class="chapter" data-level="7" data-path="tablice-ang.-arrays.html"><a href="tablice-ang.-arrays.html"><i class="fa fa-check"></i><b>7</b> Tablice (ang. arrays)</a></li>
<li class="chapter" data-level="8" data-path="tekstowy-typ-danych-ang.-string.html"><a href="tekstowy-typ-danych-ang.-string.html"><i class="fa fa-check"></i><b>8</b> Tekstowy typ danych (ang. string)</a></li>
<li class="chapter" data-level="9" data-path="wskaźniki-ang.-pointers.html"><a href="wskaźniki-ang.-pointers.html"><i class="fa fa-check"></i><b>9</b> Wskaźniki (ang. pointers)</a></li>
<li class="chapter" data-level="10" data-path="funkcje-ang.-functions.html"><a href="funkcje-ang.-functions.html"><i class="fa fa-check"></i><b>10</b> Funkcje (ang. functions)</a></li>
<li class="chapter" data-level="11" data-path="operacje-wejściawyjścia-ang.-inputoutput-operations.html"><a href="operacje-wejściawyjścia-ang.-inputoutput-operations.html"><i class="fa fa-check"></i><b>11</b> Operacje wejścia/wyjścia (ang. Input/Output operations)</a>
<ul>
<li class="chapter" data-level="11.1" data-path="operacje-wejściawyjścia-ang.-inputoutput-operations.html"><a href="operacje-wejściawyjścia-ang.-inputoutput-operations.html#printf"><i class="fa fa-check"></i><b>11.1</b> <code>printf()</code></a></li>
<li class="chapter" data-level="11.2" data-path="operacje-wejściawyjścia-ang.-inputoutput-operations.html"><a href="operacje-wejściawyjścia-ang.-inputoutput-operations.html#scanf"><i class="fa fa-check"></i><b>11.2</b> <code>scanf()</code></a></li>
</ul></li>
<li class="chapter" data-level="12" data-path="operacje-na-plikach.html"><a href="operacje-na-plikach.html"><i class="fa fa-check"></i><b>12</b> Operacje na plikach</a>
<ul>
<li class="chapter" data-level="12.1" data-path="operacje-na-plikach.html"><a href="operacje-na-plikach.html#fprintf"><i class="fa fa-check"></i><b>12.1</b> <code>fprintf()</code></a></li>
<li class="chapter" data-level="12.2" data-path="operacje-na-plikach.html"><a href="operacje-na-plikach.html#fgetc"><i class="fa fa-check"></i><b>12.2</b> <code>fgetc()</code></a></li>
<li class="chapter" data-level="12.3" data-path="operacje-na-plikach.html"><a href="operacje-na-plikach.html#fputc"><i class="fa fa-check"></i><b>12.3</b> <code>fputc()</code></a></li>
<li class="chapter" data-level="12.4" data-path="operacje-na-plikach.html"><a href="operacje-na-plikach.html#operacje-na-plikach-binarnych"><i class="fa fa-check"></i><b>12.4</b> Operacje na plikach binarnych</a></li>
</ul></li>
<li class="chapter" data-level="13" data-path="zakres-zmiennych-ang.-variable-scope.html"><a href="zakres-zmiennych-ang.-variable-scope.html"><i class="fa fa-check"></i><b>13</b> Zakres zmiennych (ang. variable scope)</a></li>
<li class="chapter" data-level="14" data-path="zmienne-statyczne-ang.-static-variables.html"><a href="zmienne-statyczne-ang.-static-variables.html"><i class="fa fa-check"></i><b>14</b> Zmienne statyczne (ang. static variables)</a></li>
<li class="chapter" data-level="15" data-path="zmienne-globalne-ang.-global-variables.html"><a href="zmienne-globalne-ang.-global-variables.html"><i class="fa fa-check"></i><b>15</b> Zmienne globalne (ang. global variables)</a></li>
<li class="chapter" data-level="16" data-path="definicje-typów-ang.-type-definitions.html"><a href="definicje-typów-ang.-type-definitions.html"><i class="fa fa-check"></i><b>16</b> Definicje typów (ang. type definitions)</a></li>
<li class="chapter" data-level="17" data-path="wyliczeniowy-typ-danych-ang.-enumerated-type.html"><a href="wyliczeniowy-typ-danych-ang.-enumerated-type.html"><i class="fa fa-check"></i><b>17</b> Wyliczeniowy typ danych (ang. enumerated type)</a></li>
<li class="chapter" data-level="18" data-path="struktury-ang.-structures.html"><a href="struktury-ang.-structures.html"><i class="fa fa-check"></i><b>18</b> Struktury (ang. structures)</a></li>
<li class="chapter" data-level="19" data-path="parametry-wiersza-poleceń-ang.-command-line-parameters.html"><a href="parametry-wiersza-poleceń-ang.-command-line-parameters.html"><i class="fa fa-check"></i><b>19</b> Parametry wiersza poleceń (ang. command line parameters)</a></li>
<li class="chapter" data-level="20" data-path="pliki-nagłówkowe-ang.-header-files.html"><a href="pliki-nagłówkowe-ang.-header-files.html"><i class="fa fa-check"></i><b>20</b> Pliki nagłówkowe (ang. header files)</a></li>
<li class="chapter" data-level="21" data-path="preprocesor.html"><a href="preprocesor.html"><i class="fa fa-check"></i><b>21</b> Preprocesor</a>
<ul>
<li class="chapter" data-level="21.1" data-path="preprocesor.html"><a href="preprocesor.html#kompilacja-warunkowa-ang.-conditional-compilation"><i class="fa fa-check"></i><b>21.1</b> Kompilacja warunkowa (ang. conditional compilation)</a></li>
<li class="chapter" data-level="21.2" data-path="preprocesor.html"><a href="preprocesor.html#definicje"><i class="fa fa-check"></i><b>21.2</b> Definicje</a></li>
<li class="chapter" data-level="21.3" data-path="preprocesor.html"><a href="preprocesor.html#makra"><i class="fa fa-check"></i><b>21.3</b> Makra</a></li>
<li class="chapter" data-level="21.4" data-path="preprocesor.html"><a href="preprocesor.html#ifdef"><i class="fa fa-check"></i><b>21.4</b> <code>#ifdef</code></a></li>
<li class="chapter" data-level="21.5" data-path="preprocesor.html"><a href="preprocesor.html#predefiniowane-stałe-symboliczne-ang.-predefined-symbolic-constants"><i class="fa fa-check"></i><b>21.5</b> Predefiniowane stałe symboliczne (ang. predefined symbolic constants)</a></li>
</ul></li>
<li class="chapter" data-level="22" data-path="unie-ang.-unions.html"><a href="unie-ang.-unions.html"><i class="fa fa-check"></i><b>22</b> Unie (ang. unions)</a></li>
<li class="chapter" data-level="23" data-path="pola-bitowe-ang.-bit-fields.html"><a href="pola-bitowe-ang.-bit-fields.html"><i class="fa fa-check"></i><b>23</b> Pola bitowe (ang. bit fields)</a></li>
<li class="divider"></li>
<li><a href="https://github.com/Asura-Codes/cheetsheets" target="_blank">Zobacz więcej..</a></li>

</ul>

      </nav>
    </div>

    <div class="book-body">
      <div class="body-inner">
        <div class="book-header" role="navigation">
          <h1>
            <i class="fa fa-circle-o-notch fa-spin"></i><a href="./"><div class="line-block"><strong>Skrypt dla początkujących</strong><br />
<strong>Poznaj C w ciągu kilku godzin</strong></div></a>
          </h1>
        </div>

        <div class="page-wrapper" tabindex="-1" role="main">
          <div class="page-inner">

            <section class="normal" id="section-">
<div id="operacje-na-plikach" class="section level1 hasAnchor" number="12">
<h1><span class="header-section-number">Rozdział 12</span> Operacje na plikach<a href="operacje-na-plikach.html#operacje-na-plikach" class="anchor-section" aria-label="Anchor link to header"></a></h1>
<p>W przypadku operacji plikowych należy użyć wskaźnika do <code>FILE</code>, który pozwoli programowi utrzymać dostęp do pliku.
Na przykład:</p>
<div class="sourceCode" id="cb80"><pre class="sourceCode c"><code class="sourceCode c"><span id="cb80-1"><a href="operacje-na-plikach.html#cb80-1" tabindex="-1"></a><span class="dt">FILE</span> <span class="op">*</span>fp<span class="op">;</span></span></code></pre></div>
<p>Aby otworzyć plik, musisz użyć funkcji <code>fopen()</code>, która zwraca wskaźnik <code>FILE*</code>.
Po otwarciu pliku można użyć wskaźnika <code>FILE*</code>, aby umożliwić kompilatorowi wykonywanie funkcji wejścia i wyjścia.</p>
<div class="sourceCode" id="cb81"><pre class="sourceCode c"><code class="sourceCode c"><span id="cb81-1"><a href="operacje-na-plikach.html#cb81-1" tabindex="-1"></a><span class="dt">FILE</span> <span class="op">*</span>fopen<span class="op">(</span><span class="dt">const</span> <span class="dt">char</span> <span class="op">*</span>filename<span class="op">,</span> <span class="dt">const</span> <span class="dt">char</span> <span class="op">*</span>mode<span class="op">);</span></span></code></pre></div>
<p>Jeśli używasz literału tekstowego jako ścieżki do pliku, musisz pamiętać, aby używać dwóch ukośników odwrotnych zamiast jednego.
Za pomocą ukośnika odwrotnego definiuje się znak ucieczki, taki jak <code>\t</code> (wstawienie tabulatora).
Użycie podwójnych ukośników odwrotnych <code>\\</code> powoduje wstawienie znaku <code>\</code>, który należy użyć podczas zapisywania ścieżki do pliku.
Tak właśnie traktowane są łańcuchy w C i C++.
W przypadku pobierania ścieżki do pliku z konsoli oczywiście nie zapisuje się ukośników podwójnie.</p>
<p>Dozwolone tryby dla <code>fopen()</code>:</p>
<ul>
<li><strong>r</strong> - otwarcie pliku do odczytu</li>
<li><strong>w</strong> - otwarcie pliku do zapisu (plik nie może już istnieć)</li>
<li><strong>a</strong> - otwarcie pliku do zapisu (kursor ustawiony na koniec pliku)</li>
<li><strong>r+</strong> - otwarcie pliku do odczytu i zapisu (kursor ustawiony na początek pliku)</li>
<li><strong>w+</strong> - otwarcie pliku do odczytu i zapisu (nadpisuje plik zaraz po otwarciu)</li>
<li><strong>a+</strong> - otwarcie pliku do odczytu i zapisu (kursor ustawiony na koniec pliku)</li>
</ul>
<p>Zauważ, że <code>fopen()</code> może zakończyć się niepowodzeniem, nawet jeśli twój program jest całkowicie poprawny.
Plik ten może nie istnieć lub może być chroniony przed zapisem.
W takich przypadkach <code>fopen()</code> zwróci wskaźnik <span class="math inline">\(NULL\)</span> (czyli <span class="math inline">\(0\)</span>).</p>
<p>Oto prosty przykład użycia <code>fopen()</code>:</p>
<div class="sourceCode" id="cb82"><pre class="sourceCode c"><code class="sourceCode c"><span id="cb82-1"><a href="operacje-na-plikach.html#cb82-1" tabindex="-1"></a><span class="dt">FILE</span> <span class="op">*</span>fp<span class="op">;</span></span>
<span id="cb82-2"><a href="operacje-na-plikach.html#cb82-2" tabindex="-1"></a>fp<span class="op">=</span>fopen<span class="op">(</span><span class="st">&quot;c:</span><span class="sc">\\</span><span class="st">test.txt&quot;</span><span class="op">,</span> <span class="st">&quot;r&quot;</span><span class="op">);</span></span></code></pre></div>
<p>Ten kod otworzy plik <em>test.txt</em> do odczytu w trybie tekstowym.
Aby otworzyć plik w trybie binarnym, musisz dodać <strong>b</strong> podczas podawania trybu na końcu tego ciągu.
Na przykład <strong>rb</strong> (w trybach czytania i pisania możesz dodać <strong>b</strong> po znaku plus <strong>r+b</strong> lub przed <strong>rb+</strong>).</p>
<p>Po zakończeniu pracy z plikiem należy go zamknąć za pomocą funkcji:</p>
<div class="sourceCode" id="cb83"><pre class="sourceCode c"><code class="sourceCode c"><span id="cb83-1"><a href="operacje-na-plikach.html#cb83-1" tabindex="-1"></a><span class="dt">int</span> fclose<span class="op">(</span><span class="dt">FILE</span> <span class="op">*</span>a_file<span class="op">);</span></span></code></pre></div>
<p><code>fclose</code> zwraca zero, jeśli plik zostanie pomyślnie zamknięty.</p>
<p>Przykładem <code>fclose</code> jest:</p>
<div class="sourceCode" id="cb84"><pre class="sourceCode c"><code class="sourceCode c"><span id="cb84-1"><a href="operacje-na-plikach.html#cb84-1" tabindex="-1"></a>fclose<span class="op">(</span>fp<span class="op">);</span></span></code></pre></div>
<div id="fprintf" class="section level2 hasAnchor" number="12.1">
<h2><span class="header-section-number">12.1</span> <code>fprintf()</code><a href="operacje-na-plikach.html#fprintf" class="anchor-section" aria-label="Anchor link to header"></a></h2>
<p>Do pracy z tekstem można używać <code>fprintf()</code> i <code>fscanf()</code>, które są podobne do <code>printf()</code> i <code>scanf()</code>, z tym że w fprintf() i fscanf() musisz przekazać wskaźnik <code>FILE*</code> jako pierwszy argument. Na przykład:</p>
<div class="sourceCode" id="cb85"><pre class="sourceCode c"><code class="sourceCode c"><span id="cb85-1"><a href="operacje-na-plikach.html#cb85-1" tabindex="-1"></a><span class="dt">FILE</span> <span class="op">*</span>fp<span class="op">;</span></span>
<span id="cb85-2"><a href="operacje-na-plikach.html#cb85-2" tabindex="-1"></a>fp<span class="op">=</span>fopen<span class="op">(</span><span class="st">&quot;c:</span><span class="sc">\\</span><span class="st">test.txt&quot;</span><span class="op">,</span> <span class="st">&quot;w&quot;</span><span class="op">);</span></span>
<span id="cb85-3"><a href="operacje-na-plikach.html#cb85-3" tabindex="-1"></a>fprintf<span class="op">(</span>fp<span class="op">,</span> <span class="st">&quot;Testing...</span><span class="sc">\n</span><span class="st">&quot;</span><span class="op">);</span></span></code></pre></div>
</div>
<div id="fgetc" class="section level2 hasAnchor" number="12.2">
<h2><span class="header-section-number">12.2</span> <code>fgetc()</code><a href="operacje-na-plikach.html#fgetc" class="anchor-section" aria-label="Anchor link to header"></a></h2>
<p>Możliwe jest również odczytywanie (lub zapisywanie) pojedynczego znaku z pliku.
Funkcja <code>fgetc()</code> pobiera jako argument wskaźnik <code>FILE*</code> i zwraca wartość <code>int</code> (nie <code>char</code>, jak można by się spodziewać). Pozwala to na odczyt pojedynczego znaku z pliku:</p>
<div class="sourceCode" id="cb86"><pre class="sourceCode c"><code class="sourceCode c"><span id="cb86-1"><a href="operacje-na-plikach.html#cb86-1" tabindex="-1"></a><span class="dt">int</span> fgetc <span class="op">(</span><span class="dt">FILE</span> <span class="op">*</span>fp<span class="op">);</span></span></code></pre></div>
<p>Gdy funkcja wczyta normalny znak z pliku, zwróci wartość odpowiednią do przechowania w <code>unsigned char</code> (liczbę z zakresu od 0 do 255).
Gdy nie zostało już nic do odczytu <code>fgetc()</code> zwróci stałą <strong>EOF</strong>, która oznacza napotkanie końca pliku.</p>
</div>
<div id="fputc" class="section level2 hasAnchor" number="12.3">
<h2><span class="header-section-number">12.3</span> <code>fputc()</code><a href="operacje-na-plikach.html#fputc" class="anchor-section" aria-label="Anchor link to header"></a></h2>
<p>Funkcja <code>fputc()</code> pozwala na wpisanie pojedynczego znaku:</p>
<div class="sourceCode" id="cb87"><pre class="sourceCode c"><code class="sourceCode c"><span id="cb87-1"><a href="operacje-na-plikach.html#cb87-1" tabindex="-1"></a><span class="dt">int</span> fputc<span class="op">(</span> <span class="dt">int</span> c<span class="op">,</span> <span class="dt">FILE</span> <span class="op">*</span>fp <span class="op">);</span></span></code></pre></div>
<p>Zauważ, że pierwszy argument typu <code>int</code> powinien zawierać wartość z zakresu <code>unsigned char</code>, aby był to prawidłowy znak.
Drugi argument to oczywiście uchwyt do pliku do zapisu.
Po pomyślnym zakończeniu <code>fputc()</code> zwróci wartość <code>c</code>, a po błędzie zwróci <strong>EOF</strong>.</p>
</div>
<div id="operacje-na-plikach-binarnych" class="section level2 hasAnchor" number="12.4">
<h2><span class="header-section-number">12.4</span> Operacje na plikach binarnych<a href="operacje-na-plikach.html#operacje-na-plikach-binarnych" class="anchor-section" aria-label="Anchor link to header"></a></h2>
<p>W przypadku pliku binarnego używasz <code>fread()</code> i <code>fwrite()</code>.
Deklaracje dla obu są podobne:</p>
<div class="sourceCode" id="cb88"><pre class="sourceCode c"><code class="sourceCode c"><span id="cb88-1"><a href="operacje-na-plikach.html#cb88-1" tabindex="-1"></a><span class="dt">size_t</span> fread<span class="op">(</span><span class="dt">void</span> <span class="op">*</span>ptr<span class="op">,</span> <span class="dt">size_t</span> size_of_elements<span class="op">,</span> <span class="dt">size_t</span> number_of_elements<span class="op">,</span> <span class="dt">FILE</span> <span class="op">*</span>a_file<span class="op">);</span></span></code></pre></div>
<div class="sourceCode" id="cb89"><pre class="sourceCode c"><code class="sourceCode c"><span id="cb89-1"><a href="operacje-na-plikach.html#cb89-1" tabindex="-1"></a><span class="dt">size_t</span> fwrite<span class="op">(</span><span class="dt">const</span> <span class="dt">void</span> <span class="op">*</span>ptr<span class="op">,</span> <span class="dt">size_t</span> size_of_elements<span class="op">,</span> <span class="dt">size_t</span> number_of_elements<span class="op">,</span> <span class="dt">FILE</span> <span class="op">*</span>a_file<span class="op">);</span></span></code></pre></div>
<p>Obie te funkcje służą do radzenia sobie z blokami pamięci, zwykle tablicami i strukturami.
Ze względu na operowanie na wskaźnikach <code>void*</code>, można używać tych funkcji ze strukturami danych (zapisywać struktury do pliku lub odczytywać struktury z pliku do pamięci).</p>
<p>Funkcja <code>fread()</code> wymaga czterech argumentów.
Deklaracja <code>void * ptr;</code> oznacza, że jest to wskaźnik, którego można użyć do przekazania wartości dowolnego typu.
Jako pierwszy argument można podać nazwę tablicy lub adres struktury, którą chcesz zapisać do pliku.
Drugi argument to rozmiar każdego elementu tablicy (w bajtach).
Gdy elementami tablicy są liczby wystarczy użyć <code>sizeof(int)</code>.
To samo tyczy się struktur i każdego innego typu.
Trzecim argumentem jest ilość elementów do odczytania lub zapisania.
Ostatnim argumentem jest po prostu wskaźnik do pliku.</p>
<p>Funkcja <code>fread()</code> zwraca liczbę odczytanych elementów.
Jeśli w pliku znajduje się 30 elementów o rozmiarze 4 bajtów (razem 120 bajtów), a parametry przekazane do funkcji wskazują na to, że ma ich odczytać 100 (czyli 400 bajtów), funkcja <code>fread()</code> zwróci liczbę 30.</p>
<p>Do sprawdzenia, czy koniec pliku został osiągnięty, używa się funkcji <code>feof()</code>, która przyjmuje jako parametr wskaźnik <code>FILE*</code> i zwraca wartość <code>true</code>, jeśli osiągnięto koniec pliku.</p>
<p>Funkcja <code>fwrite()</code> jest podobna w użyciu do <code>fread()</code>, z tym że w <code>fwrite()</code> zamiast wczytywania do pamięci zapisujesz z pamięci do pliku.
Na przykład:</p>
<div class="sourceCode" id="cb90"><pre class="sourceCode c"><code class="sourceCode c"><span id="cb90-1"><a href="operacje-na-plikach.html#cb90-1" tabindex="-1"></a><span class="dt">FILE</span> <span class="op">*</span>fp<span class="op">;</span></span>
<span id="cb90-2"><a href="operacje-na-plikach.html#cb90-2" tabindex="-1"></a>fp<span class="op">=</span>fopen<span class="op">(</span><span class="st">&quot;c:</span><span class="sc">\\</span><span class="st">test.bin&quot;</span><span class="op">,</span> <span class="st">&quot;wb&quot;</span><span class="op">);</span></span>
<span id="cb90-3"><a href="operacje-na-plikach.html#cb90-3" tabindex="-1"></a><span class="dt">char</span> x<span class="op">[</span><span class="dv">10</span><span class="op">]=</span><span class="st">&quot;ABCDEFGHIJ&quot;</span><span class="op">;</span></span>
<span id="cb90-4"><a href="operacje-na-plikach.html#cb90-4" tabindex="-1"></a>fwrite<span class="op">(</span>x<span class="op">,</span> <span class="kw">sizeof</span><span class="op">(</span>x<span class="op">[</span><span class="dv">0</span><span class="op">]),</span> <span class="kw">sizeof</span><span class="op">(</span>x<span class="op">)/</span><span class="kw">sizeof</span><span class="op">(</span>x<span class="op">[</span><span class="dv">0</span><span class="op">]),</span> fp<span class="op">);</span></span></code></pre></div>
</div>
</div>
            </section>

          </div>
        </div>
      </div>
<a href="operacje-wejściawyjścia-ang.-inputoutput-operations.html" class="navigation navigation-prev " aria-label="Previous page"><i class="fa fa-angle-left"></i></a>
<a href="zakres-zmiennych-ang.-variable-scope.html" class="navigation navigation-next " aria-label="Next page"><i class="fa fa-angle-right"></i></a>
    </div>
  </div>
<script src="libs/gitbook-2.6.7/js/app.min.js"></script>
<script src="libs/gitbook-2.6.7/js/clipboard.min.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-search.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-sharing.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-fontsettings.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-bookdown.js"></script>
<script src="libs/gitbook-2.6.7/js/jquery.highlight.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-clipboard.js"></script>
<script>
gitbook.require(["gitbook"], function(gitbook) {
gitbook.start({
"sharing": {
"github": true,
"facebook": true,
"twitter": true,
"linkedin": false,
"weibo": false,
"instapaper": false,
"vk": false,
"whatsapp": false,
"all": ["facebook", "twitter", "linkedin", "weibo", "instapaper"]
},
"fontsettings": {
"theme": "white",
"family": "sans",
"size": 2
},
"edit": {
"link": null,
"text": null
},
"history": {
"link": null,
"text": null
},
"view": {
"link": null,
"text": null
},
"download": null,
"search": {
"engine": "fuse",
"options": null
},
"toc": {
"collapse": "none"
}
});
});
</script>

<!-- dynamically load mathjax for compatibility with self-contained -->
<script>
  (function () {
    var script = document.createElement("script");
    script.type = "text/javascript";
    var src = "true";
    if (src === "" || src === "true") src = "https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.9/latest.js?config=TeX-MML-AM_CHTML";
    if (location.protocol !== "file:")
      if (/^https?:/.test(src))
        src = src.replace(/^https?:/, '');
    script.src = src;
    document.getElementsByTagName("head")[0].appendChild(script);
  })();
</script>
</body>

</html>
